generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model move {
  id                    String          @id @db.Uuid
  name                  String?         @db.VarChar(255)
  type                  String?         @db.Uuid
  power                 Int?
  accuracy              Int?
  pp                    Int?
  effect                String?         @db.VarChar(511)
  type                  type?           @relation("type", fields: [type], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_type")
  pokemon_moves         pokemon_move[]
}

model pokemon {
  name                              String?         @db.VarChar(255)
  pokedex_number                    Int?
  id                                String          @id @db.Uuid
  hp                                Int?
  attack                            Int?
  defense                           Int?
  special                           Int?
  speed                             Int?
  sprite_front_filepath             String?         @db.VarChar(255)
  sprite_back_filepath              String?         @db.VarChar(255)
  sprite_party_filepath             String?         @db.VarChar(255)
  primary_type                      type?           @relation("primary_type", references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_primary_type")
  secondary_type                    type?           @relation("secondary_type", references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_secondary_type")
  pokemon_moves                     pokemon_move[]
}

model pokemon_move {
  pokemon_id String  @db.Uuid
  move_id    String  @db.Uuid
  move       move   @relation(fields: [move_id], references: [id], onDelete: Cascade)
  pokemon    pokemon @relation(fields: [pokemon_id], references: [id], onDelete: Cascade)

  @@id([pokemon_id, move_id], map: "pokemon_move_pkey")
}

model type {
  name                    String?   @db.VarChar(255)
  id                      String    @id @db.Uuid
  moves                   move[]    @relation("move_typeTotype")
  pokemon_primary_types   pokemon[] @relation("pokemon_primary_typeTotype")
  pokemon_secondary_types pokemon[] @relation("pokemon_secondary_typeTotype")
}
