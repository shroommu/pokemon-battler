generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model move {
  id            String         @id @default(uuid()) @db.Uuid
  name          String?        @unique @db.VarChar(255)
  type_id       String?        @db.Uuid
  power         Int?
  accuracy      Int?
  pp            Int?
  effect        String?        @db.VarChar(511)
  type          type?          @relation(fields: [type_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_type")
  pokemon_moves pokemon_move[]
}

model pokemon {
  name                  String?        @db.VarChar(255)
  pokedex_number        Int?
  id                    String         @id @default(uuid()) @db.Uuid
  primary_type_id       String?        @db.Uuid
  secondary_type_id     String?        @db.Uuid
  hp                    Int?
  attack                Int?
  defense               Int?
  special               Int?
  speed                 Int?
  sprite_front_filepath String?        @db.VarChar(255)
  sprite_back_filepath  String?        @db.VarChar(255)
  sprite_party_filepath String?        @db.VarChar(255)
  primary_type          type?          @relation("pokemon_primary_type", fields: [primary_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_primary_type")
  secondary_type        type?          @relation("pokemon_secondary_type", fields: [secondary_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_secondary_type")
  pokemon_moves         pokemon_move[]
}

model pokemon_move {
  pokemon_id String  @db.Uuid
  move_id    String  @db.Uuid
  name       String  @unique
  move       move    @relation(fields: [move_id], references: [id], onDelete: Cascade)
  pokemon    pokemon @relation(fields: [pokemon_id], references: [id], onDelete: Cascade)

  @@id([pokemon_id, move_id])
}

model type {
  name                        String?   @db.VarChar(255)
  id                          String    @id @default(uuid()) @db.Uuid
  display_color               String?
  moves_with_type             move[]
  pokemon_with_primary_type   pokemon[] @relation("pokemon_primary_type")
  pokemon_with_secondary_type pokemon[] @relation("pokemon_secondary_type")
}
